# Request-Response Cycle Data Flow

This document explains the flow of data through the MVC framework, detailing how a request is processed and a response is returned. The framework follows a structured approach to maintain separation of concerns and ensure modularity.

---

## **1. Client Request**
- The client (browser, API client, etc.) sends an HTTP request to the server.
- This request contains:
  - HTTP Method (e.g., GET, POST, PUT, DELETE)
  - URL Path
  - Headers
  - Payload (for POST/PUT requests)

---

To Run the Server: php -S localhost:8000 -t public

## **2. Entry Point: `index.php`**
- All requests are routed through `index.php` (the entry point).
- Responsibilities:
  - Initialize the `Application` singleton instance.
  - Delegate the request to the `Router`.

---

## **3. Router**
- The `Router` handles the URL routing logic.
- Responsibilities:
  1. Match the incoming URL and HTTP method with the defined routes.
  2. If a match is found:
      - Extract route parameters.
      - Resolve the corresponding `Controller` and `Action` method.
  3. If no match is found:
      - Trigger a 404 response using the `Response` module.

---

## **4. Controller**
- The `Controller` processes the business logic for the matched route.
- Responsibilities:
  1. Receive sanitized inputs from the `Request` object.
  2. Validate the inputs (if applicable).
  3. Interact with the `Model` to fetch or update data.
  4. Pass data to the `View` for rendering (for HTML responses) or prepare a JSON response.

---

## **5. Model**
- The `Model` interacts with the database.
- Responsibilities:
  - Query the database to fetch, update, or delete data.
  - Return results back to the `Controller` in a structured format.

---

## **6. View (Optional)**
- The `View` is responsible for rendering HTML output.
- Responsibilities:
  - Accept data from the `Controller`.
  - Populate the view templates with dynamic data.
  - Return the rendered HTML to the `Response` module.

---

## **7. Response**
- The `Response` module handles the final output to the client.
- Responsibilities:
  1. Format the data as per the response type (e.g., HTML, JSON).
  2. Set HTTP status codes and headers.
  3. Send the response back to the client.

---

## **8. Logging and Error Handling**
- Throughout the cycle, any errors or exceptions are logged for debugging.
- If an error occurs:
  - A structured error message is generated by the `Response` module.
  - The client receives a user-friendly error page or JSON error response.

---

## **Sequence Diagram**
Below is a high-level representation of the request-response flow:

```plaintext
Client --> [index.php] --> Router --> Controller --> Model --> Controller --> View --> Response --> Client
